<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
    
    <bean id="documentColumnFactory" class="net.mindengine.oculus.frontend.db.search.ColumnFactory">
        <property name="columnClass" value="net.mindengine.oculus.frontend.domain.document.DocumentSearchColumn"/>
        <property name="file" value="WEB-INF/conf/document-columns.xml"/>
    </bean>
    
    <bean id ="testCaseReportGenerator" class="net.mindengine.oculus.frontend.service.report.ExcelTestSearchReportGenerator">
        <property name="unit" value="test-case"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
    </bean>
    
    <bean name="/project-*" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentProjectController">
        <property name="title" value="Project Documentation Library"/>
        <property name="view" value="document-project"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
    </bean>
    
    <bean name="/display-folders" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFoldersDisplayController">
        <property name="folderDAO" ref="folderDAO"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="documentDAO" ref="documentDAO"/>
    </bean>
    
    <bean name="/folder-create" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFolderCreateController">
        <property name="folderDAO" ref="folderDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/folder-delete" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFolderDeleteController">
        <property name="folderDAO" ref="folderDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/folder-rename" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFolderRenameController">
        <property name="folderDAO" ref="folderDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/testcase-create" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentTestcaseCreateController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="folderDAO" ref="folderDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/testcase-edit" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentTestcaseEditController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/document-delete" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentDeleteController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/testcase-display" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentTestcaseDisplayController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
    </bean>
    
    <bean name="/file-create" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFileUploadController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="folderDAO" ref="folderDAO"/>
        <property name="config" ref="oculusConfig"/>
        <property name="commandClass" value="net.mindengine.oculus.frontend.domain.document.FileUpload"/>
        <property name="formView" value="document-file-upload"/>
        <property name="successView" value="document-file-upload"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>        
    </bean>
    
    <bean name="/file-edit" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFileEditController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="folderDAO" ref="folderDAO"/>
        <property name="config" ref="oculusConfig"/>
        <property name="commandClass" value="net.mindengine.oculus.frontend.domain.document.FileUpload"/>
        <property name="formView" value="document-file-upload"/>
        <property name="successView" value="document-file-upload"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/file-display" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFileDisplayController">
        <property name="documentDAO" ref="documentDAO"/>
    </bean>
    
    <bean name="/file-delete" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFileDeleteController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="config" ref="oculusConfig"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/file-download" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentFileDownloadController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="config" ref="oculusConfig"/>
    </bean>
    
    <bean name="/attachment-upload" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentAttachmentUploadController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="folderDAO" ref="folderDAO"/>
        <property name="config" ref="oculusConfig"/>
        <property name="commandClass" value="net.mindengine.oculus.frontend.domain.document.DocumentAttachment"/>
        <property name="formView" value="document-attachment-upload"/>
        <property name="successView" value="document-attachment-upload"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>        
    </bean>

    <bean name="/attachment-download" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentAttachmentDownloadController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="config" ref="oculusConfig"/>
    </bean>
    
    <bean name="/attachment-delete" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentAttachmentDeleteController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="config" ref="oculusConfig"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
    
    <bean name="/testcase-search" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentTestcaseSearchController">
        <property name="title" value="Search Test-Cases"/>
        <property name="sessionForm" value="true"/>
        <property name="commandName" value="searchFilter"/>
        <property name="commandClass" value="net.mindengine.oculus.frontend.domain.document.DocumentSearchFilter"/>
        <property name="formView" value="search-test-cases"/>
        <property name="documentDAO" ref="documentDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="successView" value="search-test-cases"/>
        <property name="columnFactory" ref="documentColumnFactory"/>
        <property name="config" ref="oculusConfig"/>
    </bean>
    
    <bean name="/testcase-search-export.xls" class="net.mindengine.oculus.frontend.web.controllers.document.TestCaseSearchExportXLSController">
        <property name="commandName" value="searchFilter"/>
        <property name="commandClass" value="net.mindengine.oculus.frontend.domain.document.DocumentSearchFilter"/>
        <property name="documentDAO" ref="documentDAO"/>
        <property name="customizationDAO" ref="customizationDAO"/>
        <property name="projectDAO" ref="projectDAO"/>
        <property name="userDAO" ref="userDAO"/>
        <property name="columnFactory" ref="documentColumnFactory"/>
        <property name="config" ref="oculusConfig"/>
        <property name="reportGenerator" ref="testCaseReportGenerator"/>
    </bean>
    
    <bean name="/documents-move" class="net.mindengine.oculus.frontend.web.controllers.document.DocumentsMoveController">
        <property name="documentDAO" ref="documentDAO"/>
        <property name="folderDAO" ref="folderDAO"/>
        <property name="permissions">
            <list>
                <ref bean="_P_DOCUMENT_MANAGMENT"/>
            </list>
        </property>
    </bean>
        
</beans>
